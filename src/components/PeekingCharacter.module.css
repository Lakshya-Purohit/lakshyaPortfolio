/* PeekingCharacter.module.css */

.character {
  position: fixed;
  z-index: 10000; /* Above navbar (1000) but below search overlay (20000) */
  pointer-events: none;
  width: 100px;
  height: 120px;
  
  /* POSITION: Bottom Left Corner */
  left: 2rem;
  bottom: 4.5rem; /* Offset from bottom to not clash with potential taskbars/hints */
  
  /* 3D FEEL: Perspective + Initial state */
  perspective: 1000px;
  transform: translateZ(20px) scale(1);
  opacity: 1;
  
  transition: 
    transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1),
    left 0.6s cubic-bezier(0.34, 1.56, 0.64, 1),
    opacity 0.4s ease,
    filter 0.4s ease;
  
  filter: drop-shadow(0 15px 35px rgba(0, 0, 0, 0.15));
}

/* ── BEHAVIOR: RUNNING AWAY (Scroll) ── */
.character.scrolling {
  left: -120px;
  transform: translateZ(0) scale(0.8) rotateY(-20deg);
  opacity: 0;
}

/* ── BEHAVIOR: HIDING (Proximity/Hover) ── */
.character.hiding {
  left: -50px;
  transform: translateY(40px) scale(0.9) rotate3d(1, 1, 1, 15deg);
  opacity: 0;
  filter: blur(4px) brightness(0.8);
}

/* ── INTERNALS ── */
.svg {
  width: 100%;
  height: 100%;
  overflow: visible;
  display: block;
}

/* 3D Gazing animation */
@keyframes meshBob {
  0%, 100% { transform: translateY(0) rotateX(0deg); }
  50% { transform: translateY(-4px) rotateX(5deg); }
}

.character:not(.scrolling):not(.hiding) .svg {
  animation: meshBob 3.5s ease-in-out infinite;
}

/* Theme Adaptation */
[data-theme="dark"] .character {
  filter: drop-shadow(0 20px 50px rgba(0, 0, 0, 0.5));
}

[data-theme="dark"] .shirt {
  fill: #2997ff;
}

/* Subtle glowing eyes in the dark */
[data-theme="dark"] .eyeWhite {
  fill: #f5f5f7;
}
